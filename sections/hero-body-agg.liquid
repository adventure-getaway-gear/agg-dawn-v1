{% schema %}
{
  "name": "Hero Body AGG",
  "settings": [
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "Welcome to Adventure Getaway Gear"
    },
    {
      "type": "text",
      "id": "subheadline",
      "label": "Subheadline",
      "default": "Your journey starts here."
    },
    {
      "type": "richtext",
      "id": "body_text",
      "label": "Body Text",
      "default": "<p>Discover top gear, accessories, and inspiration for every adventure.</p>"
    },
    {
      "type": "select",
      "id": "media_type",
      "label": "Media Type",
      "options": [
        {"value": "image", "label": "Image"},
        {"value": "video", "label": "Video"}
      ],
      "default": "image"
    },
    {
      "type": "image_picker",
      "id": "body_image",
      "label": "Body Image"
    },
    {
      "type": "text",
      "id": "body_image_alt",
      "label": "Body Image Alt Text",
      "default": "Adventure Body Image"
    },
    {
      "type": "url",
      "id": "video_url",
      "label": "Video URL (YouTube, Vimeo, MP4)"
    },
    {
      "type": "text",
      "id": "video_title",
      "label": "Video Title (SEO)",
      "default": "Adventure Getaway Gear Video"
    },
    {
      "type": "checkbox",
      "id": "video_autoplay",
      "label": "Autoplay Video",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "video_muted",
      "label": "Mute Video",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "video_controls",
      "label": "Show Controls",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "video_loop",
      "label": "Loop Video",
      "default": false
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Media Position",
      "options": [
        {"value": "left", "label": "Left"},
        {"value": "right", "label": "Right"},
        {"value": "top", "label": "Top"}
      ],
      "default": "left"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f8f8f8"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "CTA Link"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Text",
      "default": "Shop Now"
    },
    {
      "type": "text",
      "id": "cta_aria_label",
      "label": "CTA Button Aria Label (SEO)",
      "default": "Shop Adventure Gear"
    },
    {
      "type": "textarea",
      "id": "custom_css",
      "label": "Custom CSS"
    }
  ],
  "presets": [
    {
      "name": "Hero Body AGG"
    }
  ]
}
{% endschema %}

<section class="hero-body-agg" style="background:{{ section.settings.background_color }};padding:3rem 0;">
  <style>
    @media (min-width: 900px) {
      .hero-body-agg .agg-body-img {
        margin-left: 0;
        margin-right: 0;
        padding-left: 0;
        padding-right: 0;
      }
      .hero-body-agg .agg-body-content {
        padding-left: 2rem;
        padding-right: 2rem;
      }
    }
    @media (max-width: 899px) {
      .hero-body-agg .agg-body-img {
        margin-bottom: 2rem;
      }
      .hero-body-agg .agg-body-content {
        padding: 0 1rem;
      }
    }
  </style>
  <div style="display:flex;flex-wrap:wrap;align-items:center;justify-content:center;max-width:1200px;margin:0 auto;">
    {% if section.settings.image_position == 'left' or section.settings.image_position == 'top' %}
      {% if section.settings.media_type == 'image' and section.settings.body_image %}
        <div class="agg-body-img" style="flex:1;min-width:280px;text-align:center;">
          <img src="{{ section.settings.body_image | img_url: '800x' }}" alt="{{ section.settings.body_image_alt }}" style="max-width:100%;height:auto;border-radius:12px;" />
        </div>
      {% elsif section.settings.media_type == 'video' and section.settings.video_url %}
        <div class="agg-body-img" style="flex:1;min-width:280px;text-align:center;">
          {% assign video_url = section.settings.video_url | downcase %}
          {% if video_url contains 'youtube.com' or video_url contains 'youtu.be' %}
            {% assign yt_params = '' %}
            {% if section.settings.video_autoplay %}{% assign yt_params = yt_params | append: '&autoplay=1' %}{% endif %}
            {% if section.settings.video_muted %}{% assign yt_params = yt_params | append: '&mute=1' %}{% endif %}
            {% if section.settings.video_controls == false %}{% assign yt_params = yt_params | append: '&controls=0' %}{% endif %}
            {% if section.settings.video_loop %}{% assign yt_params = yt_params | append: '&loop=1' %}{% endif %}
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
              <iframe src="{{ section.settings.video_url }}?rel=0{{ yt_params }}" title="{{ section.settings.video_title }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;"></iframe>
            </div>
          {% elsif video_url contains 'vimeo.com' %}
            {% assign vimeo_params = '' %}
            {% if section.settings.video_autoplay %}{% assign vimeo_params = vimeo_params | append: '&autoplay=1' %}{% endif %}
            {% if section.settings.video_muted %}{% assign vimeo_params = vimeo_params | append: '&muted=1' %}{% endif %}
            {% if section.settings.video_controls == false %}{% assign vimeo_params = vimeo_params | append: '&controls=0' %}{% endif %}
            {% if section.settings.video_loop %}{% assign vimeo_params = vimeo_params | append: '&loop=1' %}{% endif %}
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
              <iframe src="{{ section.settings.video_url }}?rel=0{{ vimeo_params }}" title="{{ section.settings.video_title }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;"></iframe>
            </div>
          {% else %}
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
              <video
                src="{{ section.settings.video_url }}"
                title="{{ section.settings.video_title }}"
                {% if section.settings.video_autoplay %}autoplay{% endif %}
                {% if section.settings.video_muted or section.settings.video_autoplay %}muted{% endif %}
                {% if section.settings.video_controls %}controls{% endif %}
                {% if section.settings.video_loop %}loop{% endif %}
                style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;"
              ></video>
            </div>
          {% endif %}
        </div>
      {% endif %}
    {% endif %}
    <div class="agg-body-content" style="flex:2;min-width:280px;">
      <h2 style="margin:0 0 1rem 0;">{{ section.settings.headline }}</h2>
      <h3 style="margin:0 0 1rem 0;">{{ section.settings.subheadline }}</h3>
      <div style="margin-bottom:2rem;">{{ section.settings.body_text }}</div>
      {% if section.settings.cta_link %}
        <a href="{{ section.settings.cta_link }}" class="btn" aria-label="{{ section.settings.cta_aria_label }}" style="background:#000;color:#fff;padding:0.75rem 2rem;border-radius:4px;text-decoration:none;display:inline-block;">{{ section.settings.cta_text }}</a>
      {% endif %}
    </div>
    {% if section.settings.image_position == 'right' %}
      {% if section.settings.media_type == 'image' and section.settings.body_image %}
        <div class="agg-body-img" style="flex:1;min-width:280px;text-align:center;">
          <img src="{{ section.settings.body_image | img_url: '800x' }}" alt="{{ section.settings.body_image_alt }}" style="max-width:100%;height:auto;border-radius:12px;" />
        </div>
      {% elsif section.settings.media_type == 'video' and section.settings.video_url %}
        <div class="agg-body-img" style="flex:1;min-width:280px;text-align:center;">
          {% assign video_url = section.settings.video_url | downcase %}
          {% if video_url contains 'youtube.com' or video_url contains 'youtu.be' %}
            {% assign yt_params = '' %}
            {% if section.settings.video_autoplay %}{% assign yt_params = yt_params | append: '&autoplay=1' %}{% endif %}
            {% if section.settings.video_muted %}{% assign yt_params = yt_params | append: '&mute=1' %}{% endif %}
            {% if section.settings.video_controls == false %}{% assign yt_params = yt_params | append: '&controls=0' %}{% endif %}
            {% if section.settings.video_loop %}{% assign yt_params = yt_params | append: '&loop=1' %}{% endif %}
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
              <iframe src="{{ section.settings.video_url }}?rel=0{{ yt_params }}" title="{{ section.settings.video_title }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;"></iframe>
            </div>
          {% elsif video_url contains 'vimeo.com' %}
            {% assign vimeo_params = '' %}
            {% if section.settings.video_autoplay %}{% assign vimeo_params = vimeo_params | append: '&autoplay=1' %}{% endif %}
            {% if section.settings.video_muted %}{% assign vimeo_params = vimeo_params | append: '&muted=1' %}{% endif %}
            {% if section.settings.video_controls == false %}{% assign vimeo_params = vimeo_params | append: '&controls=0' %}{% endif %}
            {% if section.settings.video_loop %}{% assign vimeo_params = vimeo_params | append: '&loop=1' %}{% endif %}
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
              <iframe src="{{ section.settings.video_url }}?rel=0{{ vimeo_params }}" title="{{ section.settings.video_title }}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;"></iframe>
            </div>
          {% else %}
            <div style="position:relative;padding-bottom:56.25%;height:0;overflow:hidden;border-radius:12px;">
              <video
                src="{{ section.settings.video_url }}"
                title="{{ section.settings.video_title }}"
                {% if section.settings.video_autoplay %}autoplay{% endif %}
                {% if section.settings.video_muted or section.settings.video_autoplay %}muted{% endif %}
                {% if section.settings.video_controls %}controls{% endif %}
                {% if section.settings.video_loop %}loop{% endif %}
                style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:12px;"
              ></video>
            </div>
          {% endif %}
        </div>
      {% endif %}
    {% endif %}
  </div>
  {% if section.settings.custom_css %}
    <style>{{ section.settings.custom_css }}</style>
  {% endif %}
</section>
